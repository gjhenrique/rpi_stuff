---
services:
  backrest:
    image: docker.io/garethgeorge/backrest:v1.9.2
    restart: unless-stopped
    network_mode: "service:tailscale"
    volumes:
      - ${EXT_PATH}/backrest/data:/data
      - ${EXT_PATH}/backrest/config:/config
      - cache:/cache
      - ${EXT_PATH}:${EXT_PATH}
    environment:
      - BACKREST_DATA=/data
      - BACKREST_CONFIG=/config/config.json
      - TZ=Europe/Berlin

  tailscale:
    restart: unless-stopped
    ports:
      - 9898

volumes:
  cache:
