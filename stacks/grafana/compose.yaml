---
services:
  grafana:
    image: grafana/grafana:12.3.1
    network_mode: host
    restart: unless-stopped
    volumes:
      - ${EXT_PATH}/grafana/data:/var/lib/grafana
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD}
      - GF_ALERTING_ENABLED=false
      - GF_UNIFIED_ALERTING_ENABLED=false
      - GF_PANELS_DISABLE_SANITIZE_HTML=false
      - GF_SERVER_HTTP_PORT=3000
      - TZ=${TZ:-Europe/Berlin}
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost:3000/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
