{
  "packages": [
    "git-crypt@0.8.0",
    "restic@0.18.1",
    "yq-go@4.49.2",
  ],
  "shell": {
    "scripts": {
      // restic wrapper
      // e.g. rw paperless snapshots
      "rw": [
	"source_restic() { yq \".$1\" app/secrets.yml; }",

	"export RESTIC_PASSWORD=$(source_restic 'restic_password')",
	"export RESTIC_REPOSITORY=\"s3:$(source_restic 'restic_repository_prefix')/$1\"",
	"export AWS_ACCESS_KEY_ID=$(source_restic 'restic_aws_key_id')",
	"export AWS_SECRET_ACCESS_KEY=$(source_restic 'restic_aws_secret_key')",

	"shift",
	"restic \"${@}\"",
      ]
    }
  }
}
